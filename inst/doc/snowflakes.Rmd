---
title: "Random Snowflake Generator"
author: "Svetlana Eden"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Random Snowflake Generator}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
If you are working on a report that involves plotting data and if you are tired of the point types available in R base graphics, you can use package `snowflakes` to break your report routine. The package contains functions that plot random snowflakes so you can use them instead of points in your data report. The snowflakes have some useful properties. Just like dots in R base graphics are always round, the snowflakes are always round no matter what the aspect ratio you use. Another nice property is that the snowflakes are scaleable. If you increase the size of the snowflake, its cristal width will increase accordingly. But most importantly, there is an infinite number of snowflakes types that you can choose from. Each type is uniquely determined by a random seed. Snowflakes can be plotted using different sizes, widths, the angles, and of course, colors. The following examples demonstrate how to create all kinds of cool snow-looking snowflakes.

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

```{r, echo=TRUE, results='asis'}
library('snowflakes')
#data('snowflakes')
```

First, let's create a simple plot. Suppose we need to plot a quadratic function, $Y = (X-1)^2$. Instead of points, we use snowflakes plotted with transparent gray color:

```{r, echo=TRUE, fig.show='hold', fig.height = 4, fig.width = 4, fig.cap = "Quadratic function using snowflakes instead of points."}
xCoor = seq(0, 2, .25)
yCoor = (xCoor-1)^2
radius = 0.1

set.seed(1)

plot(xCoor, yCoor, type="l", axes = FALSE, ylab="", xlab="", ylim = range(yCoor) + radius*c(-1, 1), xlim = range(xCoor) + radius*c(-1, 1), col=gray(.9))
snowflakes(xCoor = xCoor, yCoor = yCoor, radius = radius, color = "#22222222")
```

The next example demonstrates that the `crystal` width of each snowflake can be modified using argument `deltaCoef`:

```{r, echo=TRUE, fig.show='hold', fig.height = 4, fig.width = 4, fig.cap = "Quadratic function using snowflakes instead of points."}
xCoor = seq(0, 2, .25)
yCoor = xCoor
radius = 0.15

set.seed(1)

plot(xCoor, yCoor, type="l", axes = FALSE, ylab="", xlab="", ylim = range(yCoor) + radius*c(-1, 1), xlim = range(xCoor) + radius*c(-1, 1), col=gray(.9))
snowflakes(xCoor = xCoor, yCoor = yCoor, radius = radius, seeds = c(1), deltaCoef = 15 - (0:(length(xCoor)-1)), color = "#44444444")
```



Note that the function `snowflakes` generated and plotted unique snowflakes. The pattern of each snowflake was defined by the random seeds that this function has returned. Returning random seeds is important because if you especially like a particular snowflake, you can always `keep` it using its seed. The following example uses only three snowflake patterns with seeds `1`, `2`, and `3`. In this example we also vary the rotation angle and the color of the snowflake

```{r, echo=TRUE, fig.show='hold', fig.height = 4, fig.width = 4, fig.cap = "Quadratic function using snowflakes instead of points."}
t = seq(0, 5*pi, .5)
xCoor = t*cos(t)
yCoor = t*sin(t)
radius = 1
orientation = runif(length(xCoor))*(pi/6)

set.seed(1)

plot(xCoor, yCoor, type="l", axes = FALSE, ylab="", xlab="", ylim = range(yCoor) + radius*c(-1, 1), xlim = range(xCoor) + radius*c(-1, 1), col=gray(.9))
returnedSeeds = snowflakes(xCoor = xCoor, yCoor = yCoor, radius = radius, orientation = orientation, seeds = 1:3, color = gray((1:length(xCoor))/(length(xCoor)+1)))
```

Note that in the example above, we used an opaque gray color. If we used a transparent color instead (as in previous examples), the snowflakes would look more interesting.

The next example takes the snowflake generator on a higher artistic level :).
We first write a function that plots snowflakes using several layers of transparent colors.

```{r, echo=TRUE, fig.show='hold', fig.height = 7, fig.width = 7, fig.cap = "Example of snowflakes with their random seeds."}

fancySnowflakes = function(xCoor, yCoor, radius, seeds, orientation = pi/6){
  colorCoord = as.hexmode(col2rgb("blue"))
  transpBlue =paste("#", paste(colorCoord, collapse=""), "44", sep="")
  colorCoord = as.hexmode(col2rgb("white"))
  transpWhite =paste("#", paste(colorCoord, collapse=""), "66", sep="")
  for (i in 1:length(xCoor)){
    snowflakes(xCoor = xCoor[i], yCoor = yCoor[i], radius = radius, color = transpBlue, anotherColor = "#33333333", seeds = seeds[i])
    snowflakes(xCoor = xCoor[i], yCoor = yCoor[i], radius = radius, color = transpWhite, anotherColor = transpWhite, seeds = seeds[i])
  }
}

numSnowflPerRow = 5
set.seed(2018)
selectSeeds = sample(1:100000, numSnowflPerRow^2)
xCoor = rep(1:numSnowflPerRow, numSnowflPerRow)
yCoor = rep(1:numSnowflPerRow, each = numSnowflPerRow)
radius = .4

par(mar = c(0, 0, 0, 0))
plot(range(xCoor)+c(-1, 1)*.5, range(yCoor)+c(-1, 1)*.5, type="n", axes = FALSE, ylab="", xlab="")
for (i in 1:numSnowflPerRow^2){
  fancySnowflakes(xCoor = xCoor[i], yCoor = yCoor[i], radius = radius, seeds = selectSeeds[i])
  text(xCoor[i], yCoor[i], selectSeeds[i], cex=.5, pos = 3)
}

```

```{r, echo=TRUE, fig.show='hold', fig.height = 7, fig.width = 7, fig.cap = "Example of snowflakes with their random seeds."}
########### make transparent color
colorCoord = as.hexmode(col2rgb("blue"))
transpBlue =paste("#", paste(colorCoord, collapse=""), "44", sep="")
colorCoord = as.hexmode(col2rgb("white"))
transpWhite =paste("#", paste(colorCoord, collapse=""), "66", sep="")

numSnowflPerRow = 5
selectSeeds = sample(1:100000, numSnowflPerRow^2)
xCoor = rep(1:numSnowflPerRow, numSnowflPerRow)
yCoor = rep(1:numSnowflPerRow, each = numSnowflPerRow)
radius = .4

par(mar = c(0, 0, 0, 0))
plot(range(xCoor)+c(-1, 1)*.5, range(yCoor)+c(-1, 1)*.5, type="n", axes = FALSE, ylab="", xlab="")
snowflakes(xCoor = xCoor[1], yCoor = yCoor[1], radius = radius, color = transpBlue, anotherColor = "#33333333", seeds = selectSeeds[1])
for (i in 2:numSnowflPerRow^2){
  snowflakes(xCoor = xCoor[i], yCoor = yCoor[i], radius = radius, color = transpBlue, anotherColor = "#33333333", seeds = selectSeeds[i])
  snowflakes(xCoor = xCoor[i-1], yCoor = yCoor[i-1], radius = radius, color = transpWhite, anotherColor = transpWhite, seeds = selectSeeds[i-1])
  text(xCoor[i-1], yCoor[i-1], selectSeeds[i-1], cex=.5, pos = 3)
}

snowflakes(xCoor = xCoor[i], yCoor = yCoor[i], radius = radius, color = transpWhite, anotherColor = transpWhite, seeds = selectSeeds[i])
text(xCoor[i], yCoor[i], selectSeeds[i], cex=.5, pos = 3)

```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))
